<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bantha Cleaning</title>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="offer.css">
    <link rel="stylesheet" href="blog.css">
    <link rel="icon" type="image/png" href="logontp.png">
    <link rel="shortcut icon" type="image/png" href="logontp.png">
    <link rel="apple-touch-icon" href="logontp.png">
</head>
<body>
    <header class="header">
        <div class="header-container">
            <!-- Logo -->
            <div class="logo-section">
                <a href="index.html">
                    <img src="logo.png" alt="Company Logo" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                </a>
                <div style="display:none; font-weight:bold; font-size:1.2rem; color:#333;">LOGO</div>
            </div>

            <!-- Opening Hours -->
            <div class="opening-hours">
                <h3 id="hours-title">Opening Hours Today</h3>
                <div class="current-hours">
                    <span class="status-dot" id="status-dot"></span>
                    <span id="current-day"></span> - <span id="current-hours"></span>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="nav-menu">
                <div class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </div>
                
                <div class="nav-item">
                    <a href="#" class="nav-link services-toggle">
                        Services
                        <span class="dropdown-arrow">‚ñº</span>
                    </a>
                    <div class="dropdown">
                        <a href="generalcleaning.html">General Cleaning</a>
                        <a href="deepcleaning.html">Deep Cleaning</a>
                    </div>
                </div>
                
                <div class="nav-item">
                    <a href="blog.html" class="nav-link">Blog</a>
                </div>
                
                <div class="nav-item">
                    <a href="contact.html" class="nav-link">Contact</a>
                </div>
            </nav>

            <!-- Hamburger Menu -->
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <!-- Mobile Overlay -->
        <div class="mobile-overlay"></div>
    </header>

    <!-- Add Post Button -->
<!-- <a href="add-post.html" class="btn-add-post">+ Add New Post</a> -->

<!-- Header -->
<div class="section-header">
    <h1>üßπ Cleaning Tips Blog</h1>
    <p>Professional cleaning advice and tips for a spotless home</p>
</div>

<!-- Blog Container -->
<div class="container-blog">
    <div class="grid-blog" id="gridBlogPosts">
        <!-- Posts will be loaded here -->
    </div>
</div>

<!-- Modal -->
<div id="modalPost" class="overlay-modal">
    <div class="container-modal">
        <span class="btn-close-modal" onclick="closeModal()">&times;</span>
        
        <!-- Images Section -->
        <div id="sectionModalImages" class="section-images-modal">
            <!-- Images will be loaded here -->
        </div>
        
        <!-- Content Section -->
        <div class="body-modal">
            <h2 id="titleModal" class="title-modal"></h2>
            <div id="dateModal" class="date-modal"></div>
            <div id="contentModal" class="text-content-modal"></div>
            
            <!-- Contact Section -->
            <div class="section-contact">
                <h3>üìû Get In Touch</h3>
                <div class="grid-contact">
                    <div class="item-contact">
                        <strong>Email</strong>
                        <a href="mailto:">your-email@example.com</a>
                    </div>
                    <div class="item-contact">
                        <strong>Website</strong>
                        <a href="https://" target="_blank">www.yourwebsite.com</a>
                    </div>
                    <div class="item-contact">
                        <strong>Phone</strong>
                        <a href="tel:">+1 (555) 123-4567</a>
                    </div>
                    <div class="item-contact">
                        <strong>Address</strong>
                        <span>123 Main Street<br>City, State 12345</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <script>
        // Store current post data for gallery navigation
        let currentPost = null;

        // Simple blog system
        class SimpleBlog {
            constructor() {
                this.posts = this.loadPosts();
                this.render();
            }

            // Load posts from localStorage
            loadPosts() {
                const saved = localStorage.getItem('blogPosts');
                return saved ? JSON.parse(saved) : [];
            }

            // Render all posts
            render() {
                const grid = document.getElementById('blogGrid');
                
                if (this.posts.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <h3>No posts yet</h3>
                            <p>Click "Add New Post" to create your first blog post!</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = this.posts.map(post => {
                    // Handle multiple images
                    let imageDisplay;
                    if (post.images && post.images.length > 1) {
                        imageDisplay = `
                            <img src="${post.images[0]}" alt="${post.title}">
                            <div class="image-count">üì∏ ${post.images.length}</div>
                        `;
                    } else {
                        imageDisplay = post.image ? 
                            `<img src="${post.image}" alt="${post.title}">` : 
                            `<span>üìù ${post.title}</span>`;
                    }

                    return `
                        <div class="blog-card" onclick="showFullPost(${post.id})">
                            <div class="blog-image">
                                ${imageDisplay}
                            </div>
                            <div class="blog-content">
                                <div class="blog-date">${post.date}</div>
                                <h3 class="blog-title">${post.title}</h3>
                                <p class="blog-excerpt">${post.excerpt}</p>
                                <span class="read-more">Read More ‚Üí</span>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // Refresh posts (for real-time updates)
            refresh() {
                this.posts = this.loadPosts();
                this.render();
            }
        }

        // Show full post in modal (FIXED VERSION)
        function showFullPost(postId) {
            const posts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
            const post = posts.find(p => p.id === postId);
            
            if (!post) return;

            // Store current post for gallery navigation
            currentPost = post;

            // Set modal content
            document.getElementById('modalTitle').textContent = post.title;
                        document.getElementById('modalDate').textContent = post.date;
            
            // FIXED: Better content formatting with proper paragraph breaks
            let formattedContent = post.content;
            
            // First, normalize line endings
            formattedContent = formattedContent.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            
            // Split content into paragraphs based on double line breaks
            let paragraphs = formattedContent.split(/\n\s*\n/);
            
            // If no double line breaks found, split on single line breaks
            if (paragraphs.length === 1) {
                paragraphs = formattedContent.split('\n');
            }
            
            // Format each paragraph
            formattedContent = paragraphs
                .map(paragraph => paragraph.trim())
                .filter(paragraph => paragraph.length > 0)
                .map(paragraph => {
                    // Handle single line breaks within paragraphs as <br>
                    const formattedParagraph = paragraph.replace(/\n/g, '<br>');
                    return `<p>${formattedParagraph}</p>`;
                })
                .join('');
            
            document.getElementById('modalContent').innerHTML = formattedContent;

            // Handle images
            showImageGallery();

            // Show modal
            document.getElementById('postModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Show image gallery (separated for reuse)
        function showImageGallery() {
            const modalImages = document.getElementById('modalImages');
            
            if (currentPost.images && currentPost.images.length > 0) {
                if (currentPost.images.length === 1) {
                    // Single image - full width
                    modalImages.innerHTML = `<img src="${currentPost.images[0]}" alt="${currentPost.title}">`;
                } else {
                    // Multiple images - grid layout
                    modalImages.innerHTML = `
                        <div class="modal-images-grid">
                            ${currentPost.images.map(img => `<img src="${img}" alt="${currentPost.title}" onclick="showLargeImage('${img}')">`).join('')}
                        </div>
                    `;
                }
            } else if (currentPost.image) {
                // Fallback single image
                modalImages.innerHTML = `<img src="${currentPost.image}" alt="${currentPost.title}">`;
            } else {
                // No images
                modalImages.innerHTML = `
                    <div style="height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                        üìù ${currentPost.title}
                    </div>
                `;
            }
        }

        // Show large image (FIXED - now goes back to gallery, not blog)
        function showLargeImage(imageSrc) {
            const modalImages = document.getElementById('modalImages');
            modalImages.innerHTML = `
                <img src="${imageSrc}" alt="Large view">
                <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer;" onclick="showImageGallery()">
                    ‚Üê Back to Gallery
                </div>
            `;
        }

        // Close modal
        function closeModal() {
            document.getElementById('postModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            currentPost = null; // Clear current post
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('postModal');
            if (e.target === modal) {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Initialize blog
        const blog = new SimpleBlog();

        // Refresh when new posts are added (for real-time updates)
        window.addEventListener('storage', function(e) {
            if (e.key === 'blogPosts') {
                blog.refresh();
            }
        });

        // Also refresh when page gets focus (when returning from add-post page)
        window.addEventListener('focus', function() {
            blog.refresh();
        });

        // Refresh every 5 seconds to catch new posts
        setInterval(() => {
            blog.refresh();
        }, 5000);
    </script>

    <!-- Footer Section -->
    <section class="footer-section">
        <div class="footer-container">
            <!-- Column 1: Menu -->
            <div class="footer-column">
                <h3>Menu</h3>
                <div class="menu-item">
                    <a href="index.html">Home</a>
                </div>
                <div class="menu-item">
                    <a href="javascript:void(0);" onclick="showHideMenu()">Service</a>
                    <div class="service-submenu" id="submenu">
                        <div class="submenu-item">
                            <a href="generalcleaning.html">General Cleaning</a>
                        </div>
                        <div class="submenu-item">
                            <a href="deepcleaning.html">Deep Cleaning</a>
                        </div>
                    </div>
                </div>
                <div class="menu-item">
                    <a href="blog.html">Blog</a>
                </div>
                <div class="menu-item">
                    <a href="contact.html">Contact</a>
                </div>
            </div>
            
            <!-- Column 2: Follow Us -->
            <div class="footer-column">
                <h3>Follow Us</h3>
                <div class="social-links">
                    <a href="https://www.facebook.com/profile.php?id=61578910409312" class="social-link">
                        <span class="social-icon">üìò</span>
                        Facebook
                    </a>
                    <a href="https://www.instagram.com/banthacleaning/" class="social-link">
                        <span class="social-icon">üì∑</span>
                        Instagram
                    </a>
                    <a href="https://wa.me/qr/BPCNNI6GNVEWA1" class="social-link">
                        <span class="social-icon">üí¨</span>
                        WhatsApp
                    </a>
                </div>
            </div>
            
            <!-- Column 3: Contact Info -->
            <div class="footer-column">
                <h3>Contact Info</h3>
                <div class="contact-item">
                    <div class="contact-label">Email</div>
                    <div class="contact-value">
                        <a href="mailto:banthacleaningcompany.com">banthacleaningcompany.com</a>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-label">Phone</div>
                    <div class="contact-value">
                        <a href="tel:+447825183734">+447825183734</a>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-label">Website</div>
                    <div class="contact-value">
                        <a href="https://banthacleaning.com" target="_blank">banthacleaning.com</a>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-label">Address</div>
                    <div class="contact-value">Victoria Rd, Aldershot, UK</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Copyright Section -->
    <section class="copyright-section">
        <div class="copyright-container">
            <div class="copyright-text">
                ¬© 2025 Bantha Cleaning Ltd. All rights reserved.
            </div>
            <div class="footer-links">
                <a href="#privacy-policy">Privacy Policy</a>
                <a href="#terms-of-service">Terms of Service</a>
                <a href="contact.html">Contact Us</a>
            </div>
        </div>
    </section>


    <script>
        function showHideMenu() {
            var menu = document.getElementById('submenu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
            return false;
        }
    </script>
    <script src="header.js"></script>
</body>

</html>
